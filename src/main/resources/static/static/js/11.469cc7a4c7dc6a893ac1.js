webpackJsonp([11],{"2BLC":function(t,e,n){var a=n("TDgO");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("3fa3496e",a,!0)},TDgO:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.edit-input[data-v-fe40bedc] {\n  padding-right: 100px;\n}\n.cancel-btn[data-v-fe40bedc] {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n",""])},tVh0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("woOf"),i=n.n(a),s=n("vMJZ"),l={name:"userList",data:function(){return{list:null,total:0,listLoading:!0,Status:[{id:"1",name:"是"},{id:"0",name:"否"}],department:[{id:"1",name:"平台测试部"},{id:"2",name:"资管测试部"},{id:"3",name:"经纪测试部"},{id:"4",name:"银行测试部"},{id:"5",name:"交易所测试部"}],sexs:["男","女"],listQuery:{userStatus:"",departmentId:"",sex:"",name:"",current:1,limit:10},downloadLoading:!1}},computed:{},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(s.i)(this.listQuery).then(function(e){t.list=e.data.data.records,t.total=e.data.data.total,t.listLoading=!1}).catch(function(){t.listLoading=!1})},handleFilter:function(){this.listQuery.current=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.current=t,this.getList()},handleCreate:function(){this.getList()},changeStatus:function(t,e){var n=this;Object(s.g)(i()({},{id:e.id,userStatus:e.userStatus})).then(function(t){var a=t.data.success;"1"===e.userStatus&&!0===a?n.$message({message:"账号 解冻 成功",type:"success"}):"0"===e.userStatus&&!0===a?n.$message({message:"账号 冻结 成功",type:"success"}):"0"===e.userStatus&&!1===a?(n.$message({message:"冻结失败",type:"error"}),e.userStatus="1"):"1"===e.userStatus&&!1===a&&(n.$message({message:"解冻失败",type:"error"}),e.userStatus="0")}).catch(function(t){console.log(t)})},deleteById:function(t){var e=this;this.$confirm("此操作将永久删除用户 "+t+"  , 是否继续?","提示",{type:"warning"}).then(function(){Object(s.b)(i()({},{id:t})).then(function(t){e.$notify({title:"成功",message:"删除用户成功",type:"success",duration:2e3}),e.getList()}).catch(function(t){console.log(t)})}).catch(function(){e.$message.info("已取消删除!")})},ResetPassword:function(t){var e=this;this.$confirm("重置该用户 "+t+"  密码, 是否继续?","提示",{type:"warning"}).then(function(){Object(s.d)(i()({},{id:t})).then(function(t){e.$notify({title:"成功",message:"重置密码成功",type:"success",duration:2e3})}).catch(function(t){console.log(t)})}).catch(function(){e.$message.info("已取消操作!")})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e(23),n.e(22)]).then(n.bind(null,"zWO4")).then(function(e){var n=t.formatJson(["id","account","name","age","wechat","portrait","sex","maxError","userStatus"],t.list);e.export_json_to_excel({header:["ID","账号","用户名","年龄","微信","头像","性别","错误剩余数","可用状态"],data:n,filename:"user-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"是否可用"},on:{change:t.handleFilter},model:{value:t.listQuery.userStatus,callback:function(e){t.$set(t.listQuery,"userStatus",e)},expression:"listQuery.userStatus"}},t._l(t.Status,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"部门"},on:{change:t.handleFilter},model:{value:t.listQuery.departmentId,callback:function(e){t.$set(t.listQuery,"departmentId",e)},expression:"listQuery.departmentId"}},t._l(t.department,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"性别"},on:{change:t.handleFilter},model:{value:t.listQuery.sex,callback:function(e){t.$set(t.listQuery,"sex",e)},expression:"listQuery.sex"}},t._l(t.sexs,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"名称/账号"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.handleCreate}},[t._v(t._s("刷新"))]),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:t.downloadLoading,icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v(t._s(t.$t("table.export")))])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"107px",align:"center",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{src:t.row.portrait,height:"50",width:"50"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"100px",align:"center",label:"账号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.account))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"100px",align:"center",label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"120px",align:"center",label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.departmentId?n("div",[t._v("平台测试部")]):t._e(),t._v(" "),2==e.row.departmentId?n("div",[t._v("资管测试部")]):t._e(),t._v(" "),3==e.row.departmentId?n("div",[t._v("经纪测试部")]):t._e(),t._v(" "),4==e.row.departmentId?n("div",[t._v("银行测试部")]):t._e(),t._v(" "),5==e.row.departmentId?n("div",[t._v("交易所测试部")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"80px",align:"center",label:"年龄"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.age))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"80px",align:"center",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sex))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"auto",align:"center",label:"微信"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.wechat))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"140",align:"center",label:"可用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{staticClass:"switch",attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0","active-text":"ON","inactive-text":"OFF"},on:{change:function(n){t.changeStatus(e.$index,e.row)}},model:{value:e.row.userStatus,callback:function(n){t.$set(e.row,"userStatus",n)},expression:"scope.row.userStatus"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){t.deleteById(e.row.id)}}})],1),t._v(" "),n("router-link",{attrs:{to:"/user/editUser/"+e.row.id}},[n("el-tooltip",{attrs:{effect:"dark",content:"修改",placement:"top"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"}})],1)],1),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"重置密码",placement:"top"}},[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-setting"},on:{click:function(n){t.ResetPassword(e.row.id)}}})],1)]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":t.listQuery.current,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=n("VU/8")(l,r,!1,function(t){n("2BLC")},"data-v-fe40bedc",null);e.default=o.exports}});