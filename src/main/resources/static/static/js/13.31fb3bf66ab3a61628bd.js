webpackJsonp([13],{Ni0i:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("woOf"),a=n.n(s),l=n("dZAk"),i=n("0xDb"),o={name:"testresultList",data:function(){return{show:!1,list:null,total:0,listLoading:!0,exportList:null,projectList:[],responceCodeList:["200","500","404","503","403"],statusList:["pass","fail"],listQuery:{group1:"",project:"",responceCode:"",status:"",current:1,limit:10},downloadLoading:!1}},filters:{statusFilter:function(t){return{pass:"success",fail:"danger"}[t]}},computed:{},created:function(){this.getList(),this.getProjectList(),this.getExportList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(l.e)(this.listQuery).then(function(e){t.list=e.data.data.records,t.total=e.data.data.total,t.listLoading=!1}).catch(function(){t.listLoading=!1})},getProjectList:function(){var t=this;Object(l.d)().then(function(e){t.projectList=e.data.data}).catch(function(){t.$message({message:"项目列表加载失败...",type:"error"})})},getExportList:function(){var t=this;Object(l.c)(a()({},{group1:this.listQuery.group1,project:this.listQuery.project,responceCode:this.listQuery.responceCode,status:this.listQuery.status})).then(function(e){t.exportList=e.data.data}).catch(function(){t.$message({message:"导出数据获取失败...",type:"error"})})},handleFilter:function(){this.listQuery.current=1,this.getList(),this.getExportList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.current=t,this.getList()},handleCreate:function(){this.getList()},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e(23),n.e(22)]).then(n.bind(null,"zWO4")).then(function(e){var n=t.formatJson(["project","functionId","requestMsg","expectResult","responceResult","responceCode","status","group1"],t.exportList);e.export_json_to_excel({header:["项目名称","功能号","请求描述","预期结果","响应结果","响应码","断言状态","时间戳"],data:n,filename:"自动化测试结果"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"abc"===t?Object(i.c)(e[t]):e[t]})})},exportExcel:function(){Object(l.a)({fileName:"testresult-list",group1:this.listQuery.group1,project:this.listQuery.project,responceCode:this.listQuery.responceCode,status:this.listQuery.status}).then(function(t){var e=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"});if("download"in document.createElement("a")){var n=document.createElement("a");n.download="test.xls",n.style.display="none",n.href=URL.createObjectURL(e),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(e,"test.xls")})}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"项目"},on:{change:t.handleFilter},model:{value:t.listQuery.project,callback:function(e){t.$set(t.listQuery,"project",e)},expression:"listQuery.project"}},t._l(t.projectList,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"响应码"},on:{change:t.handleFilter},model:{value:t.listQuery.responceCode,callback:function(e){t.$set(t.listQuery,"responceCode",e)},expression:"listQuery.responceCode"}},t._l(t.responceCodeList,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"断言状态"},on:{change:t.handleFilter},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.statusList,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入：时间戳"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.group1,callback:function(e){t.$set(t.listQuery,"group1",e)},expression:"listQuery.group1"}}),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.handleCreate}},[t._v(t._s("刷新"))]),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",loading:t.downloadLoading,icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v(t._s(t.$t("table.export")))])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[this.show?n("el-table-column",{attrs:{align:"center",label:"ID",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.id))])]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"项目名称",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{width:"120px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[t._v(t._s(e.row.project))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"70px",align:"center",label:"功能号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.functionId))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,width:"200px",align:"center",label:"请求描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{width:"200px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[t._v(t._s(e.row.requestMsg))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"auto",align:"center",label:"预期结果"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{width:"120px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[t._v(t._s(e.row.expectResult))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"auto",align:"center",label:"响应结果"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{width:"120px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[t._v(t._s(e.row.responceResult))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"80px",align:"center",label:"响应码"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.responceCode))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"80px",align:"center",label:"断言"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s("fail"===e.row.status?" 失败":"通过"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"130",align:"center",label:"时间戳"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.group1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"115"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:"/testresult/testresultDetail/"+e.row.id}},[n("el-tooltip",{attrs:{effect:"dark",content:"详情",placement:"top"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-tickets"}})],1)],1),t._v(" "),n("router-link",{attrs:{to:"/testresult/compareTestresult/"+e.row.id}},[n("el-tooltip",{attrs:{effect:"dark",content:"比对",placement:"top"}},[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-view"}})],1)],1)]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":t.listQuery.current,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=n("VU/8")(o,r,!1,function(t){n("RQAD")},"data-v-9aca8af8",null);e.default=c.exports},RQAD:function(t,e,n){var s=n("Xo48");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("7a9f6b99",s,!0)},Xo48:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.edit-input[data-v-9aca8af8] {\n  padding-right: 100px;\n}\n.cancel-btn[data-v-9aca8af8] {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n\n/*.el-tooltip__popper.is-dark{\n   width: 50px !important;\n   background-color: #68af40;\n }*/\n",""])}});